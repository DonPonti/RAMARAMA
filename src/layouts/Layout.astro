---
import SEO from '../components/SEO.astro';
import Navbar from '../components/Navbar.astro';
import Footer from '../components/Footer.astro';

interface Props {
  title?: string;
  description?: string;
  canonical?: string;
}

const { title, description, canonical } = Astro.props;
---

<!DOCTYPE html>
<html lang="en" class="scroll-smooth">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  
  <SEO title={title} description={description} canonical={canonical} />

  <!-- Favicon -->
  <link rel="icon" type="image/svg+xml" href="/favicon.svg" />
  <link rel="apple-touch-icon" href="/apple-touch-icon.png" />
  <link rel="manifest" href="/manifest.json" />

  <!-- Fonts: preconnect + dns-prefetch for fastest resolution -->
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link rel="dns-prefetch" href="https://fonts.googleapis.com" />
  <link rel="dns-prefetch" href="https://fonts.gstatic.com" />
  <!-- Non-blocking font load: media=print trick avoids render-blocking -->
  <link
    href="https://fonts.googleapis.com/css2?family=Cinzel+Decorative:wght@400;700&family=Lora:ital,wght@0,400;0,600;1,400&family=Tiro+Devanagari+Sanskrit:ital@0;1&display=swap"
    rel="stylesheet"
    media="print"
    onload="this.media='all'"
  />
  <noscript>
    <link href="https://fonts.googleapis.com/css2?family=Cinzel+Decorative:wght@400;700&family=Lora:ital,wght@0,400;0,600;1,400&family=Tiro+Devanagari+Sanskrit:ital@0;1&display=swap" rel="stylesheet" />
  </noscript>

  <style>
    body {
      background-color: #fdf8f0;
      background-image: 
        radial-gradient(circle at 20% 80%, rgba(249,115,22,0.06) 0%, transparent 50%),
        radial-gradient(circle at 80% 20%, rgba(212,160,23,0.06) 0%, transparent 50%);
      min-height: 100vh;
      position: relative;
      overflow-x: hidden;
    }
    html.dark body {
      background-color: #111827;
      background-image:
        radial-gradient(circle at 20% 80%, rgba(249,115,22,0.08) 0%, transparent 50%),
        radial-gradient(circle at 80% 20%, rgba(212,160,23,0.05) 0%, transparent 50%);
    }
    html.dark {
      color-scheme: dark;
    }

    /* Rama silhouette â€” fixed behind everything */
    body::before {
      content: '';
      position: fixed;
      bottom: 0;
      right: -2%;
      width: min(420px, 72vw);
      height: min(680px, 90vh);
      background-image: url('/rama-silhouette.svg');
      background-repeat: no-repeat;
      background-position: bottom right;
      background-size: contain;
      opacity: 0.045;
      pointer-events: none;
      z-index: 0;
      /* saffron tint via filter */
      filter: sepia(1) saturate(3) hue-rotate(5deg) brightness(0.6);
    }
    html.dark body::before {
      opacity: 0.06;
      filter: sepia(1) saturate(2) hue-rotate(10deg) brightness(0.9);
    }

    /* Ensure all content sits above the silhouette */
    nav, main, footer {
      position: relative;
      z-index: 1;
    }

    /* Mobile tap target improvements */
    button, a {
      -webkit-tap-highlight-color: transparent;
    }

    /* Prevent font-size zoom on input focus in iOS */
    input, textarea, select {
      font-size: 16px !important;
    }

    /* Smooth scroll on mobile */
    html {
      scroll-behavior: smooth;
      -webkit-text-size-adjust: 100%;
    }
  </style>
</head>
<body class="dark:bg-gray-900 dark:text-gray-100 transition-colors duration-300">
  <Navbar />
  <main class="pt-14">
    <slot />
  </main>
  <Footer />
</body>
</html>
